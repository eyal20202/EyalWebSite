---
import BaseLayout from '@layouts/BaseLayout.astro';
import AvatarWithAI from '@components/Avatar/AvatarWithAI';
import AnimatedKeywords from '@components/Hero/AnimatedKeywords';
import { getCollection } from 'astro:content';
import BlogCard from '@components/Blog/BlogCard.astro';

const recentPosts = (await getCollection('blog'))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 3);

const keywords = ['Full-Stack Engineer', 'Microservices Architect', 'Cloud & DevOps', 'Real-Time Systems'];
---

<BaseLayout title="דף הבית" description="אתר אישי - פורטפוליו, בלוג ומשחקים">
  <AvatarWithAI client:load size="large" />

  <main class="min-h-screen space-y-28 pb-24">
    <!-- Hero Section -->
    <section class="relative overflow-hidden">
      <div class="absolute inset-0 pointer-events-none">
        <span class="hero-orb w-[420px] h-[420px] bg-primary-500/40 top-[-120px] left-[-120px] blur-[120px]"></span>
        <span class="hero-orb w-[520px] h-[520px] bg-brand-500/40 bottom-[-160px] right-[-140px] blur-[140px]"></span>
      </div>
      <div class="container-custom relative py-20 lg:py-32">
        <div class="grid lg:grid-cols-12 gap-12 items-center">
          <div class="lg:col-span-7 space-y-8">
            <div class="inline-flex items-center gap-3 px-4 py-2 rounded-full bg-white/10 border border-white/15 text-sm tracking-wide">
              <span class="flex items-center gap-2 text-primary-200">
                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path d="M13 5.055A9 9 0 0 1 20.945 13" stroke-linecap="round" stroke-linejoin="round"></path>
                  <path d="M11 18.945A9 9 0 0 1 3.055 11" stroke-linecap="round" stroke-linejoin="round"></path>
                  <path d="m21 3-9 9" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
                Mid-Senior Full Stack Developer
              </span>
            </div>
            <h1 class="text-4xl md:text-6xl lg:text-7xl font-semibold leading-tight text-balance">
              אני אייל מזרחי, <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary-300 via-white to-brand-300">Full Stack Developer</span>
            </h1>
            <p class="text-lg md:text-xl text-gray-300 max-w-3xl leading-relaxed">
              מפתח Full Stack עם ניסיון בפיתוח מערכות מבוססות Java, Node.js ו-React. עובד על פרויקטים ארגוניים, מיקרו-שירותים, ו-CI/CD pipelines.
            </p>
            <div class="flex flex-wrap gap-3">
              <span class="px-3 py-1 rounded-full border border-white/20 text-sm text-gray-200">Java · Spring Boot</span>
              <span class="px-3 py-1 rounded-full border border-white/20 text-sm text-gray-200">React · TypeScript</span>
              <span class="px-3 py-1 rounded-full border border-white/20 text-sm text-gray-200">Kafka · Redis</span>
              <span class="px-3 py-1 rounded-full border border-white/20 text-sm text-gray-200">AWS · Azure · OpenShift</span>
            </div>
            <div class="flex gap-4 flex-wrap">
              <a href="/projects" class="btn btn-primary">הפרויקטים שלי</a>
              <a href="/contact" class="btn btn-secondary">שריינו פגישה</a>
              <a href="/blog" class="btn btn-ghost">קראו תובנות</a>
              <a href="/games" class="btn btn-ghost">משחק טריוויה</a>
            </div>
          </div>
          <div class="lg:col-span-5">
            <div class="glass-panel p-8 lg:p-10 space-y-8">
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 text-gray-200">
                <div class="bg-white/5 border border-white/10 rounded-2xl p-5 shadow-inner-glow">
                  <p class="text-sm text-gray-400">ניסיון</p>
                  <p class="text-3xl font-semibold mt-2">6+</p>
                  <p class="text-xs text-gray-400 mt-1">שנות פיתוח</p>
                </div>
                <div class="bg-white/5 border border-white/10 rounded-2xl p-5 shadow-inner-glow">
                  <p class="text-sm text-gray-400">טכנולוגיות</p>
                  <p class="text-3xl font-semibold mt-2">Full</p>
                  <p class="text-xs text-gray-400 mt-1">Stack Development</p>
                </div>
                <div class="bg-white/5 border border-white/10 rounded-2xl p-5 shadow-inner-glow">
                  <p class="text-sm text-gray-400">Cloud</p>
                  <p class="text-3xl font-semibold mt-2">AWS</p>
                  <p class="text-xs text-gray-400 mt-1">Azure · OpenShift</p>
                </div>
                <div class="bg-white/5 border border-white/10 rounded-2xl p-5 shadow-inner-glow">
                  <p class="text-sm text-gray-400">מתמחה ב</p>
                  <p class="text-3xl font-semibold mt-2">Backend</p>
                  <p class="text-xs text-gray-400 mt-1">מיקרו-שירותים</p>
                </div>
              </div>
              <div class="bg-gradient-to-br from-white/10 to-white/5 border border-white/10 rounded-3xl p-6 text-sm text-gray-300 leading-relaxed">
                <p>
                  "מפתח עצמאי עם יכולת לקחת בעלות על פיצ'רים, לכתוב קוד נקי, ולעבוד בצורה יעילה בצוות. מתמחה בפיתוח Backend ו-Full Stack."
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Capabilities -->
    <section class="container-custom">
      <div class="gradient-border">
        <div class="grid lg:grid-cols-4 gap-6 p-10">
          <div class="space-y-3">
            <h2 class="text-2xl font-semibold">התמחויות</h2>
            <p class="text-sm text-gray-300 leading-relaxed">
              פיתוח Full Stack עם דגש על Backend, מיקרו-שירותים, ו-CI/CD.
            </p>
          </div>
          <div class="space-y-2 text-sm text-gray-300">
            <p class="uppercase text-xs tracking-[0.3rem] text-gray-400">Backend</p>
            <h3 class="text-lg font-medium">Java & Node.js</h3>
            <p>פיתוח שירותים ב-Spring Boot, Express, עבודה עם Kafka, Redis, ומסדי נתונים.</p>
          </div>
          <div class="space-y-2 text-sm text-gray-300">
            <p class="uppercase text-xs tracking-[0.3rem] text-gray-400">Frontend</p>
            <h3 class="text-lg font-medium">React & TypeScript</h3>
            <p>בניית ממשקים עם React, ניהול state, ואופטימיזציה של ביצועים.</p>
          </div>
          <div class="space-y-2 text-sm text-gray-300">
            <p class="uppercase text-xs tracking-[0.3rem] text-gray-400">DevOps</p>
            <h3 class="text-lg font-medium">CI/CD & Cloud</h3>
            <p>הטמעת pipelines, Docker, Kubernetes, וניהול deployments ב-AWS ו-Azure.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Recent Blog Posts -->
    {recentPosts.length > 0 && (
      <section class="container-custom space-y-10">
        <div class="flex items-end justify-between flex-wrap gap-4">
          <div>
            <p class="text-xs uppercase tracking-[0.3rem] text-primary-200">Public Learnings</p>
            <h2 class="text-3xl md:text-4xl font-semibold mt-2">מאמרים אחרונים</h2>
            <p class="text-sm text-gray-400 mt-2">מחשבות וטיפים על פיתוח, מיקרו-שירותים, ו-DevOps.</p>
          </div>
          <a href="/blog" class="btn btn-secondary">כל הבלוג</a>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {recentPosts.map((post) => (
            <BlogCard post={post} />
          ))}
        </div>
      </section>
    )}

    <!-- Featured Projects -->
    <section class="container-custom space-y-10">
      <div class="flex items-end justify-between flex-wrap gap-4">
        <div>
          <p class="text-xs uppercase tracking-[0.3rem] text-primary-200">Selected Work</p>
          <h2 class="text-3xl md:text-4xl font-semibold mt-2">פרויקטים מודגשים</h2>
          <p class="text-sm text-gray-400 mt-2">פרויקטים שעליהם עבדתי. לחצו לכל הפרויקטים.</p>
        </div>
        <a href="/projects" class="btn btn-secondary">כל הפרויקטים</a>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="card space-y-4">
          <div class="flex items-center justify-between">
            <h3 class="text-xl font-semibold text-white">מערכת מיקרו־שירותים ל־FinTech</h3>
            <span class="px-3 py-1 rounded-full text-xs bg-white/10 border border-white/10">Enterprise</span>
          </div>
          <p class="text-sm text-gray-300 leading-relaxed">
            מערכת מיקרו-שירותים ל-FinTech. עבדתי על פיתוח שירותים ב-Spring Boot, אינטגרציה עם Kafka, ובניית ממשק ב-React.
          </p>
          <div class="flex flex-wrap gap-2 text-xs text-primary-100">
            <span class="px-2 py-1 bg-white/5 border border-white/10 rounded-full">Java</span>
            <span class="px-2 py-1 bg-white/5 border border-white/10 rounded-full">Kafka</span>
            <span class="px-2 py-1 bg-white/5 border border-white/10 rounded-full">React</span>
            <span class="px-2 py-1 bg-white/5 border border-white/10 rounded-full">Azure</span>
          </div>
        </div>
        <div class="card space-y-4">
          <div class="flex items-center justify-between">
            <h3 class="text-xl font-semibold text-white">פלטפורמת פרסום דיגיטלי</h3>
            <span class="px-3 py-1 rounded-full text-xs bg-brand-500/20 border border-white/10 text-brand-100">Growth</span>
          </div>
          <p class="text-sm text-gray-300 leading-relaxed">
            פלטפורמת ניהול קמפיינים. פיתוח Backend ב-Node.js, שימוש ב-Redis לקאשינג, ובניית ממשק ב-React.
          </p>
          <div class="flex flex-wrap gap-2 text-xs text-primary-100">
            <span class="px-2 py-1 bg-white/5 border border-white/10 rounded-full">Node.js</span>
            <span class="px-2 py-1 bg-white/5 border border-white/10 rounded-full">Redis</span>
            <span class="px-2 py-1 bg-white/5 border border-white/10 rounded-full">Kubernetes</span>
            <span class="px-2 py-1 bg-white/5 border border-white/10 rounded-full">React</span>
          </div>
        </div>
        <div class="card space-y-4">
          <div class="flex items-center justify-between">
            <h3 class="text-xl font-semibold text-white">מוקד תמיכה היברידי</h3>
            <span class="px-3 py-1 rounded-full text-xs bg-primary-500/20 border border-white/10 text-primary-100">Realtime</span>
          </div>
          <p class="text-sm text-gray-300 leading-relaxed">
            מערכת תמיכה עם WebSockets לתקשורת בזמן אמת. פיתוח שירותים, אינטגרציה למערכות חיצוניות, וניהול deployments.
          </p>
          <div class="flex flex-wrap gap-2 text-xs text-primary-100">
            <span class="px-2 py-1 bg-white/5 border border-white/10 rounded-full">WebSockets</span>
            <span class="px-2 py-1 bg-white/5 border border-white/10 rounded-full">Microservices</span>
            <span class="px-2 py-1 bg-white/5 border border-white/10 rounded-full">AWS</span>
            <span class="px-2 py-1 bg-white/5 border border-white/10 rounded-full">Terraform</span>
          </div>
        </div>
      </div>
    </section>
  </main>
</BaseLayout>
